# -*- encoding : utf-8 -*-
class MemberMailer < ActionMailer::Base
  default :from => "olook <bemvinda@my.olookmail.com.br>"

  def reseller_welcome_email(reseller)
    @reseller = reseller
    mail(:to => @reseller.email, :subject => "RECEBEMOS SEU CADASTRO!")
  end

  def reseller_confirmation(reseller)
    @reseller = reseller
    mail(:to => @reseller.email, :subject => "Revenda Olook")
  end

  def welcome_email(member)
    @member = member
    default_welcome_email
  end

  alias :welcome_gift_half_male_user_email :welcome_email
  alias :welcome_thin_half_male_user_email :welcome_email
  alias :welcome_gift_half_female_user_email :welcome_email
  alias :welcome_thin_half_female_user_email :welcome_email

  private

  def default_welcome_email
    mail(:to => @member.email, :subject => subject_by_gender_and_kind)
    headers["X-SMTPAPI"] = { 'category' => 'welcome_email' }.to_json
  end

  def subject_by_gender_and_kind
    "BEM-VIND#{@member.male? ? 'O' : 'A'} | Conheça a Olook, você vai amar a gente!"
  end
end

window.products = [];

$("#products li").each(function(index, element){ products.push(element.id)});

var new_products = [];

<% @liquidation_products.each do |lp| %>
  new_products.push("<%= lp.product_id %>");
<% end %>

$.each(new_products, function(index, product){
  if($.inArray(product, products) != -1){
    $("#"+product).remove();
  }
});

<% if @liquidation_products.any? %>
  $('#products').append('<%= j render "products", :liquidation_products => @liquidation_products %>');
<% else %>
  $("#products").html("Nenhum produto encontrado");
<% end %>

$(".loading").hide();

<% if @liquidation_products.next_page %>
  $('.pagination').replaceWith('<%= j will_paginate(@liquidation_products) %>');
<% else %>
  $('.pagination').html("");
<% end %>
<% sleep 1 %>
$('#liquidation_filter').find("input[type='checkbox']").removeAttr("disabled");

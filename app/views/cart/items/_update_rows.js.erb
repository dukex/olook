<% @cart.items.each do |item| %>
//update item value on item row
$('p#item_subtotal_' + <%= item.id %>).text('<%= number_to_currency(item.price * item.quantity) %>');

//update items quantity on cart summary header
$("#cart_items").text("<%= pluralize(@cart.items_total, 'item', 'itens') %>");

//update total order value
$('table#total tr.total span').text('<%= number_to_currency(@cart_service.total) %>');

// update item rows' discounts and subtotals
$("table#items tbody tr#item_<%= item.id %> td.discount").empty();

$("table#items tbody tr#item_<%= item.id %> td.discount").first().append("<%= escape_javascript( render partial: 'cart/items/discount',
																				locals: {
																					cart_service: @cart_service,
																					item: item
																				} ) %>");

$("table#items tbody tr#item_<%= item.id %> td.value").empty();

$("table#items tbody tr#item_<%= item.id %> td.value").first().append("<%= escape_javascript( render partial: 'cart/items/subtotal',
																					locals: {
																						item: item
																					} ) %>");

//update item quantity on cart summary (pull down)
$('#cart_summary ul li[data-id=<%= item.id %>] p.qte span').text(<%= item.quantity %>);
<% end %>

<% if @freebie %>
  $('.freebie').replaceWith('<%= j render('freebie/item', freebie: @freebie) %>');
<% end %>

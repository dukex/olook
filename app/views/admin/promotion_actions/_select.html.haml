- content_for :footer do
  = javascript_include_tag('admin/promotion_action_select')
= f.fields_for :action_parameter, @action_parameter  do |builder|
  .field
    = builder.label 'Ação aplicada'
    = builder.select(:promotion_action_id, options_for_select(@promotion_actions.collect {|p| [p.name, p.id, {rel: "#action_params_desc_#{p.class.to_s.underscore}"}] }), {}, class: 'show_on_select')
  = builder.fields_for :action_params do |action_params|
    - @promotion_actions.each do |promotion_action|
      %table.action_params_desc{id: "action_params_desc_#{promotion_action.class.to_s.underscore}" }
        %tr
          - promotion_action.class.filters.each do |key, opts|
            %th= opts[:desc]
        %tr
          - promotion_action.class.filters.each do |key, opts|
            - case opts[:kind]
            - when 'boolean'
              %td= action_params.check_box key, checked: @action_parameter.action_params[key.to_s] == '1'
            - else
              %td= action_params.text_field key, value: @action_parameter.action_params[key.to_s]

:javascript
  SOASTA = {};
  SOASTA.pg = "product";
  if(typeof BOOMR !== "undefined") {
    BOOMR.addVar("h.pg", SOASTA.pg);
  }
- content_for(:head) do
  - @hide_fb_page_id = true
  %meta{content: @facebook_app_id, property: "fb:app_id"}/
  %meta{content: "#{@product.name} | Olook", property: "og:title"}/
  %meta{content: @product.description, property: "og:description"}/
  %meta{content: @product.catalog_picture.to_s, property: "og:image"}/
  %meta{content: "#{@url}/produto/#{@product.id}", property: "og:url"}/
  %meta{content: "Olook", property: "og:site_name"}/
  %meta{content: "product.item", property: "og:type"}/
  %meta{content: "product", name: "chaordic:source"}/
  %meta{content: @chaordic_user, name: "chaordic:user"}/
  %meta{content: @chaordic_product, "data-pid" => @product.id, name: "chaordic:product"}/
  %meta{content: @chaordic_category, name: "chaordic:category"}/
  %meta{content: current_cart.try(:id), name: "chaordic:cart_id"}/
  = stylesheet_link_tag "new_structure/section/lite_product"

- content_for :data_layer do
  = render partial: "shared/data_layer/product"

- content_for :footer do
  = javascript_include_tag "product"
  = render "shared/lightbox_credits"

= render "shared/mkt_breadcrumb"
%section#product{itemscope: true, itemtype: "http://schema.org/Product" }
  = product_breadcrumbs_for(@product)
  - if @product.has_look_products?(current_admin)
    = link_to "Comprar o look completo", "#related"
  .pics_social
    %ul.thumbs
      - @product.pictures.order(:position).each do |picture|
        %li= image_tag("#{picture.image_url(:thumb).to_s}", data: {full: picture.image_url(:main).to_s, zoom: picture.image_url(:zoom_out).to_s })
      - unless @product.youtube_token.blank?
        %li= image_tag("product/bt-modal-video.jpg", class: "js-video-modal", onclick: "#{track_event("Product", "ClickVideo", @product.id.to_s)};javascript:olook.videoModalBuild(olook.youtubePlayer(olook.youtubeParser('#{@product.youtube_token}')));", data: {videoId: @product.youtube_token})
    .big_pic.js-image-zoom= image_tag(@product.pictures.order(:position).first.image_url(:main), data: {zoom: @product.pictures.order(:position).first.image_url(:zoom_out)}, :class => "full", itemprop: "image")
    .social-media
      %ul.social-list
        %li.icon-nofav.wishlist{id: 'js-removeFromWishlistButton', data: {product_id: @product.id}, style: "display:#{has_wished?(@product.id) ? 'block' : 'none'}"}
          %p
            Remover
        %li.icon-fav.wishlist{id: 'js-addToWishlistButton', data: {product_id: @product.id}, style: "display:#{has_wished?(@product.id) ? 'none' : 'block'}"}
          %p
            Favoritar
        %li.icon-twitter
        %li.icon-facebook
        %li.icon-instagram
        %li.icon-pin
        %li.icon-mail
      /   %li.twitter
      /     %a.twitter-share-button{data: { count: "none", size: "none", hashtags: "ficaadica", lang: "pt" }, :href => "https://twitter.com/share?text=#{share_description(@product)}"} Tweetar
      /   %li.fb
      /     .fb-share-button{data: {href: product_seo_url(@product.seo_path), type: "icon_link"} }
      /   %li.email= link_to "Email", "javascript:void(0);"
      / :javascript
      /   !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
  %p.wishlist_alert.js-wishlist_alert
  .product-info
    %h1{itemprop: 'name'}= @product.formatted_name(200)
    %h2{itemprop: 'brand', itemscope: true, itemtype: "http://schema.org/Brand"}
      %span{itemprop: 'name'}= @product.brand
    - if @product.sold_out?
      %p.out PRODUTO ESGOTADO
      %p.notice_success_message.js-product_available_notice_success 
        E-mail cadastrado com sucesso! 
        %br A gente te avisa qualquer novidade ;)
      %form#sold_out{:action => "", :method => "post", :class => "js-product_available_notice_form"}
        %input{:name => "ship-field", :type => "text", :value => "", :placeholder => "Digite aqui seu e-mail", :class => "js-product_available_notice_email"}
        = hidden_field_tag("id",@product.id)
        %button{:type => "button", :class => "js-product_available_notice_submit"} Avise-me quando disponível
      %p.notice_error_message.js-product_available_notice_error e-mail inválido
      = render 'colors'
    - else
      .cost{itemprop: 'offers', itemscope: true, itemtype: 'http://schema.org/Offer'}
        - @product_discount_service.calculate_without_promotion_or_coupon
        - if @product_discount_service.discount > 0
          %p.price-retail.price 
            de: 
            %span
              #{number_to_currency(@product_discount_service.base_price)}
          %p.plots
            por:
            %span{itemprop: 'price'} #{number_to_currency(@product_discount_service.final_price)}
        - else
          %p.price
            Preço 
            %span{itemprop: 'price'} #{number_to_currency(@product_discount_service.base_price)}
          %p.plots 
            Ou em 
            %span
              #{installments(@product.price)}
      #add-to-cart
        = hidden_field_tag("id",@product.id)
        - if [Category::CLOTH, Category::LINGERIE, Category::BEACHWEAR, Category::CURVES].include?(@product.category)
          %a.size-guide{:href => "javascript:void(0);"} Guia de medidas
        .size
          %p Selecione o tamanho:
          %ol
            - order_variants_by_size(@product.variants).each do |variant|
              %li{:class => "size_#{variant.description} #{variant_classes(variant, @shoe_size)}"}
                %label{:for => "variant_id_#{variant.id}"}= variant.description
                = hidden_field_tag("inventory_#{variant.id}", variant.inventory)
                = radio_button_tag('variant[id]', variant.id, variant_classes(variant, @shoe_size).include?('selected'), :disabled => variant.sold_out?, class:"js-variant_id" )
        = render 'colors'
        .quantity
          %p Quantidade:
          = text_field_tag('variant[quantity]', "1", class: "quantity-product js-quantity")
          %button.plus{:type => "button"} +
          %button.minus{:type => "button"} -
        %p.alert.js-alert
        = submit_tag "ADICIONAR À SACOLA", id: "add_product", class: "js-add-product add_product", onclick: track_add_to_cart_event(@product.id)
      - if !current_user.try(:reseller) #XXX Se possível tirar daqui pois impede um cache por página de produto
        %p.bonus
          Compre e ganhe 
          %span #{number_to_currency LoyaltyProgramCreditType.apply_percentage(@product.retail_price)} 
          em créditos.
          = link_to "Saiba mais", "javascript:void(0);", :class => "open_loyalty_lightbox"
    .details
      %ul.tabs
        %li
          = radio_button_tag("tabs", "about", "checked")
          %label{:for => "tabs_about"}Sobre o Produto
          #tab-content1.tab-content
            %p.description{itemprop: 'description'}= @product.description_html.html_safe
            - prepare_product_detail_info(@product).each do |detail|
              %p.category
                = print_detail_name_for @product, detail
                %span
                  = print_detail_value detail
        - if show_size_tables?(@product) && @product_detail_info
          %li
            = radio_button_tag("tabs", "medidas")
            %label{:for => "tabs_medidas"}Medidas
            #tab-content2.tab-content
              -if @new_detail
                %table
                  %tr.titulo
                    %td
                    -@size_detail.fetch(:header).each do |header|
                      %td= header.capitalize
                  -@size_detail.fetch(:content).each do |size,line|
                    %tr{class: cycle("corsim", "")}
                      %td=size
                      -line.each do |value|
                        %td= "#{value}cm"
                %p
                  ="Modelo Veste #{@size_detail.fetch(:model_size)}"
                %p
                  *Medidas aproximadas em cm
              -else
                = print_detail_name_for @product, @product_detail_info
                = print_detail_value @product_detail_info

%br{style: "clear:both"}
%ul.vantagens
  %li.title
    %p
      OLOOK VANTAGENS
  %li.mini_infos
    %h3
      TROCA E DEVOLUÇÃO 
      %span.trade
        GRÁTIS
    %span.icon
    %p.details_card
      Não ficou como você queria? Troque ou devolva em até 30 dias!
  %li.mini_infos
    %h3
      PARCELAMOS EM ATÉ 
      %br
      %span
        6 VEZES 
    %span.icon.card
    %p.details_card
      Parcela mínima de R$30
      %br
      no cartão de crédito
  %li.mini_infos
    %h3
      GRÁTIS! 15% EM 
      %br
      %span
        CRÉDITOS
    %span.icon.money
    %p.details
      Ganhe 15% do valor do pedido em crédito para sua próxima compra acima de R$100
  %li.mini_infos.last
    %h3
      ENTREGA SEGURA E 
      %span.trade
        RÁPIDA
    %span.icon.shipping
    %form#shipping{:action => "", :method => "post"}
      %input#ship-field.ship-field{:name => "ship-field", :type => "text", :value => "", :placeholder => "Digite seu cep"}
      %button#search.search{:type => "button"} OK
    %p.details
      Verifique o prazo 
      %br
      de entrega para o seu cep
    %p.shipping-msg 

%br{style: "clear:both"}
- if @product.has_look_products?(current_admin)
  = render :partial => 'product/look_products', :locals => {:look_products => @product.look_products(current_admin), :complete_look_discount => Promotion.find(Setting.complete_look_promotion_id).discount_hash }

.chaordic.similaritems
.chaordic.ultimatebuy
.chaordic.mostpopular{"data-skin" => "MP-product-detail"}


:javascript
  SOASTA = {};
  SOASTA.pg = "product";
  if(typeof BOOMR !== "undefined") {
    BOOMR.addVar("h.pg", SOASTA.pg);
  }
- content_for(:head) do
  - @hide_fb_page_id = true
  %meta{content: @facebook_app_id, property: "fb:app_id"}/
  %meta{content: "#{@product.name} | Olook", property: "og:title"}/
  %meta{content: @product.description, property: "og:description"}/
  %meta{content: @product.catalog_picture.to_s, property: "og:image"}/
  %meta{content: "#{@url}/produto/#{@product.id}", property: "og:url"}/
  %meta{content: "Olook", property: "og:site_name"}/
  %meta{content: "product.item", property: "og:type"}/
  %meta{content: "product", name: "chaordic:source"}/
  %meta{content: @chaordic_user, name: "chaordic:user"}/
  %meta{content: @chaordic_product, "data-pid" => @product.id, name: "chaordic:product"}/
  %meta{content: @chaordic_category, name: "chaordic:category"}/
  %meta{content: current_cart.try(:id), name: "chaordic:cart_id"}/
  = stylesheet_link_tag "new_structure/section/lite_product"

- content_for :data_layer do
  = render partial: "shared/data_layer/product"

- content_for :footer do
  = javascript_include_tag "product"
  #compartilhar_email
    %p COMPARTILHAR POR E-MAIL
    .msg
      %p  
    %p.forgot-msg Lembrou de mais alguém? Compartilhe
    = form_tag product_share_by_email_path, remote: true do
      = field_set_tag do
        = label_tag :nome, "Seu nome"
        = text_field_tag :name_from, current_user.try(:first_name), class: 'fields', size: '30'
      = field_set_tag do
        = label_tag :email_from, "Seu e-mail"
        = text_field_tag :email_from, current_user.try(:email), class: 'fields', size: '30'
      = field_set_tag do
        = label_tag :emails_to_deliver, "Para <span>(use vírgula para enviar para vários contatos)</span>".html_safe
        = text_field_tag :emails_to_deliver, "", class: 'fields', size: '30'
      = field_set_tag do
        = hidden_field_tag :product_id, @product.id
        = submit_tag 'Enviar', id: :send
  = render "shared/lightbox_credits"

= render "shared/mkt_breadcrumb"
%section#product{itemscope: true, itemtype: "http://schema.org/Product" }
  = product_breadcrumbs_for(@product)
  - if @product.has_look_products?(current_admin)
    = link_to "Comprar o look completo", "#related"
  .pics
    %ul.thumbs
      - @product.pictures.order(:position).each do |picture|
        %li= image_tag("#{picture.image_url(:thumb).to_s}", data: {full: picture.image_url(:main).to_s, zoom: picture.image_url(:zoom_out).to_s })
      - unless @product.youtube_token.blank?
        %li= image_tag("product/bt-modal-video.jpg", class: "js-video-modal", onclick: "#{track_event("Product", "ClickVideo", @product.id.to_s)};javascript:olook.videoModalBuild(olook.youtubePlayer(olook.youtubeParser('#{@product.youtube_token}')));", data: {videoId: @product.youtube_token})
    .big_pic.js-image-zoom= image_tag(@product.pictures.order(:position).first.image_url(:main), :class => "full", itemprop: "image")
  .social-media
    .remove-button{id: 'js-removeFromWishlistButton', data: {product_id: @product.id}, style: "display:#{has_wished?(@product.id) ? 'block' : 'none'}"}
      Remover dos favoritos
    .add-button{id: 'js-addToWishlistButton', data: {product_id: @product.id}, style: "display:#{has_wished?(@product.id) ? 'none' : 'block'}"}
      Adicionar aos favoritos
    %ul.social-list
      %li.twitter
        %a.twitter-share-button{data: { count: "none", size: "none", hashtags: "ficaadica", lang: "pt" }, :href => "https://twitter.com/share?text=#{share_description(@product)}"} Tweetar
      %li.fb
        .fb-share-button{data: {href: product_seo_url(@product.seo_path), type: "icon_link"} }
      %li.email= link_to "Email", "javascript:void(0);"
    :javascript
      !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
  .product-info
    %h1{itemprop: 'name'}= @product.formatted_name(200)
    %h2{itemprop: 'brand', itemscope: true, itemtype: "http://schema.org/Brand"}
      %span{itemprop: 'name'}= @product.brand
    - if @product.sold_out?
      %p PRODUTO ESGOTADO
      = render 'colors'
    - else
      .cost{itemprop: 'offers', itemscope: true, itemtype: 'http://schema.org/Offer'}
        - @product_discount_service.calculate_without_promotion_or_coupon
        - if @product_discount_service.discount > 0
          %p.price-retail de: #{number_to_currency(@product_discount_service.base_price)}
          %p.price{itemprop: 'price'} por: #{number_to_currency(@product_discount_service.final_price)}
        - else
          %p.price{itemprop: 'price'}= number_to_currency(@product_discount_service.base_price)
          %p.plots ou em #{installments(@product.price)}
      = form_tag(cart_items_path, onsubmit: track_add_to_cart_event(@product.id), id: "product_add_to_cart") do                                                                                                                                               |
        - if [Category::CLOTH, Category::LINGERIE, Category::BEACHWEAR, Category::CURVES].include?(@product.category)
          %a.size-guide{:href => "javascript:void(0);"} Guia de medidas
        = render 'colors'
        .size
          %p Tamanho:
          %ol
            - order_variants_by_size(@product.variants).each do |variant|
              %li{:class => "size_#{variant.description}"}
                %label{:for => "variant_id_#{variant.id}"}= variant.description
                = hidden_field_tag("inventory_#{variant.id}", variant.inventory)
                = radio_button_tag('variant[id]', variant.id, variant_classes(variant, @shoe_size).include?('selected'), :disabled => variant.sold_out? )
        .quantity
          %p Quantidade:
          = text_field_tag('variant[quantity]', "1", class: "quantity-product")
          %button.plus{:type => "button"} +
          %button.minus{:type => "button"} -
          = submit_tag "ADICIONAR À SACOLA", id: "add_product", class: "add_product"
      - if !current_user.try(:reseller) #XXX Se possível tirar daqui pois impede um cache por página de produto
        %p
          Compre e ganhe #{number_to_currency LoyaltyProgramCreditType.apply_percentage(@product.retail_price)} em créditos,
          = link_to "saiba mais", "javascript:void(0);", :class => "open_loyalty_lightbox"
    .details
      .details-item
        %h3.details-title SOBRE O PRODUTO
        .details-body
          %p.description{itemprop: 'description'}= @product.description_html.html_safe
          %dl
            - @product.sort_details_by_relevance(@product.details.only_specification.with_valid_values).each do |detail|
              - unless @product.is_a_shoe_accessory? && detail.translation_token == "Salto"
                %dt #{print_detail_name_for @product, detail}:
                - if detail.translation_token == 'Dica'
                  %dd{itemprop: 'review', itemscope: true, itemtype: 'http://schema.org/Review'}
                    %p{itemprop: 'reviewBody'}= print_detail_value detail
                - else
                  %dd= print_detail_value detail
      .details-item
        %h3.details-title MEDIDAS
        .details-body
          %p TABELA DE MEDIDAS
%br{style: "clear:both"}
- if @product.has_look_products?(current_admin)
  = render :partial => 'product/look_products', :locals => {:look_products => @product.look_products(current_admin), :complete_look_discount => Promotion.find(Setting.complete_look_promotion_id).discount_hash }
= image_tag("product/vantagens.jpg", class:"vantagens")
%h3.shipping-title PRAZO DE ENTREGA
.shipping
  %p Informe o CEP e consulte o prazo para destino
  %form#shipping{:action => "", :method => "post"}
    %input#ship-field.ship-field{:name => "ship-field", :type => "text", :value => ""}/
    %button#search.search{:type => "button"} Pesquisar
  %p.shipping-msg 

.chaordic.similaritems
.chaordic.ultimatebuy
.chaordic.mostpopular{"data-skin" => "MP-product-detail"}


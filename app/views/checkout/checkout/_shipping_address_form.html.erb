<%= fields_for "checkout[address]", address do |address_form| %>
  <%= field_set_tag do %>
    <%= address_form.label :zip_code, "CEP*" %>
    <%= address_form.text_field :zip_code, class: "zip_code  #{error_class_if_needed(address, :zip_code)}" %>
    <%= button_tag(type: "button", class: "btn_zipcode", id:"zip_code_btn", name:"zip_code_btn", onclick:'retrieve_zip_data($("#checkout_address_zip_code").val());retrieve_freight_price($("#checkout_address_zip_code").val(),"");') do %>
      <%= "Encontrar endereço" %>
    <% end %>
      <%= errors_for(address, :zip_code) %>
  <% end %> 


  <div id="address_fields" name="address_fields" <%= 'style= opacity:0;-ms-filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=0);' unless address.id || address.zip_code %>>
    <%= address_form.hidden_field :id %>
    
    <%= field_set_tag do %>
      <%= address_form.label :street, "Rua, Avenida, Praça etc"%>
      <%= address_form.text_field :street,  class: "endereco #{error_class_if_needed(address, :street)}" %>
      <%= errors_for(address, :street) %>
    <% end %>  
    
    <%= field_set_tag do %>
      <%= address_form.label :number, "Número" %>
      <%= address_form.text_field :number,  class: "numero #{error_class_if_needed(address, :number)}" %>
      <%= errors_for(address, :number) %>
    <% end %>
    
    <%= field_set_tag do %>
      <%= address_form.label :complement, "Complemento" %>
      <%= address_form.text_field :complement,  class: "compl #{error_class_if_needed(address, :complement)}" %>
      <%= errors_for(address, :complement) %>
    <% end %>

    <%= field_set_tag do %>    
      <%= address_form.label :neighborhood, "Bairro" %>
      <%= address_form.text_field :neighborhood,  class: "bairro #{error_class_if_needed(address, :neighborhood)}" %>
      <%= errors_for(address, :neighborhood) %>
    <% end %>
    
    <%= field_set_tag do %>
      <%= address_form.label :city, "Cidade" %>
      <%= address_form.text_field :city,  class: "cidade #{error_class_if_needed(address, :city)}" %>
      <%= errors_for(address, :city) %>
    <% end %>

    <%= field_set_tag do %>    
      <%= address_form.label :state, "UF" %>
      <%= address_form.text_field :state,  class: "uf #{error_class_if_needed(address, :state)}" %>
      <%= errors_for(address, :state) %>
    <% end %>

    <p class="subtitle">DESTINATÁRIO</p>
    <%= field_set_tag do %>    
      <%= address_form.label :first_name, "Nome" %>
      <%= address_form.text_field :first_name,  class: "nome_dest #{error_class_if_needed(address, :first_name)}" %>
      <%= errors_for(address, :first_name) %>
    <% end %>
    <%= field_set_tag do %>  
      <%= address_form.label :last_name, "Sobrenome" %>
      <%= address_form.text_field :last_name,  class: "sobrenome_dest #{error_class_if_needed(address, :last_name)}" %>
      <%= errors_for(address, :last_name) %>
    <% end %>
  
    <p class="subtitle">CONTATO NO LOCAL</p>
    <%= field_set_tag do %>
      <%= address_form.label :telephone, "Telefone de contato 1" %>
      <%= address_form.text_field :telephone, class: "tel_contato1 #{error_class_if_needed(address, :telephone)}" %>
      <%= errors_for(address, :telephone) %>
    <% end %>
  
    <%= field_set_tag do %>
      <%= address_form.label :mobile, "Telefone de contato 2" %>
      <%= address_form.text_field :mobile, class: "tel_contato2" %>
    <% end %>
  
    <p class="subtitle">OPÇÕES DE FRETE</p>
    <%= field_set_tag do %>
      <%= radio_button :freight, '', 'normal', class: "frete", checked: true %>
      <%= address_form.label :freight, "Entrega normal (3 dias úteis):", class: "frete_label" %>
      <span class="freight_value" id="freight_value1">R$ 5,90</span>
      <p class="freight_text">FRETE GRÁTIS PARA SUL E SUDESTE</p>
    <% end %>
  
    <%= field_set_tag do %>
      <%= radio_button :freight, '', 'express', class: "frete" %>
      <%= address_form.label :freight, "Entrega expressa (1 dia útil):", class: "frete_label" %>
      <span class="freight_value" id="freight_value2">R$ 9,90</span>
    <% end %>
  </div>  
<% end %>